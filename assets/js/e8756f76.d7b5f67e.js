"use strict";(self.webpackChunkodksinp_website=self.webpackChunkodksinp_website||[]).push([[7359],{3905:(e,t,i)=>{i.d(t,{Zo:()=>l,kt:()=>m});var n=i(7294);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var o=n.createContext({}),c=function(e){var t=n.useContext(o),i=t;return e&&(i="function"==typeof e?e(t):a(a({},t),e)),i},l=function(e){var t=c(e.components);return n.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var i=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,l=_(e,["components","mdxType","originalType","parentName"]),u=c(i),m=r,v=u["".concat(o,".").concat(m)]||u[m]||d[m]||s;return i?n.createElement(v,a(a({ref:t},l),{},{components:i})):n.createElement(v,a({ref:t},l))}));function m(e,t){var i=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=i.length,a=new Array(s);a[0]=u;var _={};for(var o in t)hasOwnProperty.call(t,o)&&(_[o]=t[o]);_.originalType=e,_.mdxType="string"==typeof e?e:r,a[1]=_;for(var c=2;c<s;c++)a[c]=i[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,i)}u.displayName="MDXCreateElement"},9613:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>_,toc:()=>c});var n=i(7462),r=(i(7294),i(3905));const s={title:"Suivi de l'\xe9tat de conservation des habitats",sidebar_position:2},a="Suivi de l'\xe9tat de conservation des habitats",_={unversionedId:"ODK-CEN/habitats_naturels_milieux/etat_conservation_des_habitats",id:"ODK-CEN/habitats_naturels_milieux/etat_conservation_des_habitats",title:"Suivi de l'\xe9tat de conservation des habitats",description:"Description",source:"@site/docs/ODK-CEN/habitats_naturels_milieux/etat_conservation_des_habitats.md",sourceDirName:"ODK-CEN/habitats_naturels_milieux",slug:"/ODK-CEN/habitats_naturels_milieux/etat_conservation_des_habitats",permalink:"/website/docs/ODK-CEN/habitats_naturels_milieux/etat_conservation_des_habitats",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ODK-CEN/habitats_naturels_milieux/etat_conservation_des_habitats.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Suivi de l'\xe9tat de conservation des habitats",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Relev\xe9s phytosociologiques",permalink:"/website/docs/ODK-CEN/habitats_naturels_milieux/releves_phytosociologiques"},next:{title:'Suivi des "dendromicrohabitats"',permalink:"/website/docs/ODK-CEN/habitats_naturels_milieux/dendromicrohabitats"}},o={},c=[{value:"Description",id:"description",level:2},{value:"Auteur(s)",id:"auteurs",level:3},{value:"Objectif",id:"objectif",level:3},{value:"Protocole mis en oeuvre",id:"protocole-mis-en-oeuvre",level:4},{value:"Pr\xe9sentation d\xe9taill\xe9e",id:"pr\xe9sentation-d\xe9taill\xe9e",level:2},{value:"Logique de collecte",id:"logique-de-collecte",level:3},{value:"Captures d&#39;\xe9crans et/ou vid\xe9o de d\xe9monstration",id:"captures-d\xe9crans-etou-vid\xe9o-de-d\xe9monstration",level:3},{value:"Utiliser ce formulaire",id:"utiliser-ce-formulaire",level:2},{value:"Licence",id:"licence",level:3},{value:"XLSform",id:"xlsform",level:3},{value:"Donn\xe9es externes et m\xe9dias associ\xe9s",id:"donn\xe9es-externes-et-m\xe9dias-associ\xe9s",level:3},{value:"Fonctionnalit\xe9s de XLSForm mises en oeuvre",id:"fonctionnalit\xe9s-de-xlsform-mises-en-oeuvre",level:2},{value:"Discussion en ligne sur le forum d&#39;ODK",id:"discussion-en-ligne-sur-le-forum-dodk",level:3},{value:"Traitement des donn\xe9es",id:"traitement-des-donn\xe9es",level:2},{value:"Scripts SQL",id:"scripts-sql",level:3},{value:"Calcul des \xe9tats de conservation :",id:"calcul-des-\xe9tats-de-conservation-",level:4}],l={toc:c};function d(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},l,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"suivi-de-l\xe9tat-de-conservation-des-habitats"},"Suivi de l'\xe9tat de conservation des habitats"),(0,r.kt)("h2",{id:"description"},"Description"),(0,r.kt)("h3",{id:"auteurs"},"Auteur(s)"),(0,r.kt)("p",null,"Formulaire co-d\xe9velopp\xe9 par Nathalie Hiessler et Mathieu Bossaert au CEN Occitanie"),(0,r.kt)("h3",{id:"objectif"},"Objectif"),(0,r.kt)("h4",{id:"protocole-mis-en-oeuvre"},"Protocole mis en oeuvre"),(0,r.kt)("p",null,"Mise en oeuvre de la m\xe9thode d'\xe9valuation de l'\xe9tat de conservation des habitats naturels (Klesczewski et al. 2010)"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Mario Klesczewski, J\xe9r\xe9mie Barret, Cl\xe9ment Baudot, Joseph Fleury. Evaluer l\u2019\xe9tat de conservation des habitats naturels \xe0 l\u2019\xe9chelle du terrain : approches dans le Languedoc-Roussillon. Revue foresti\xe8re fran\xe7aise, AgroParisTech, 2010, 62 (3-4), pp.417-427. 10.4267/2042/38955.")," ",(0,r.kt)("a",{parentName:"p",href:"https://hal.archives-ouvertes.fr/hal-03449686/document"},"hal-03449686")),(0,r.kt)("h2",{id:"pr\xe9sentation-d\xe9taill\xe9e"},"Pr\xe9sentation d\xe9taill\xe9e"),(0,r.kt)("h3",{id:"logique-de-collecte"},"Logique de collecte"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Pour chaque polygone cartographi\xe9:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Saisie des informations concernant l'observateur"),(0,r.kt)("li",{parentName:"ul"},"Renseignement des informations sur le projet",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Choix de la m\xe9thode de g\xe9or\xe9f\xe9rencement pour jointure spatiale ult\xe9rieure lorsque les identifiants de polygone ne sont pas uniques."),(0,r.kt)("li",{parentName:"ul"},"Le ou les habitats Corine avec leur pourcentages de recouvrement"),(0,r.kt)("li",{parentName:"ul"},"Lorsqu'un habitat d'int\xe9r\xeat communautaire est pr\xe9sent :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Les diff\xe9rents indicateurs des crit\xe8res de structure, de composition et de d\xe9gragation de l'habitat sont propos\xe9s \xe0 l'observateur"),(0,r.kt)("li",{parentName:"ul"},"Possibilit\xe9 de lister les esp\xe8ces exotique et rud\xe9rales")))))),(0,r.kt)("p",{parentName:"li"},"Ce sont les valeurs brutes qui sont renseign\xe9es, et non les r\xe9sultats (bon / moyen / d\xe9favorable ) de mani\xe8re \xe0 pouvoir comparer les donn\xe9es dans le temps, si les seuils \xe9taient amen\xe9s \xe0 changer. Les r\xe9sultats (notes) sont calcul\xe9s ult\xe9rieurement dans la BDD."))),(0,r.kt)("h3",{id:"captures-d\xe9crans-etou-vid\xe9o-de-d\xe9monstration"},"Captures d'\xe9crans et/ou vid\xe9o de d\xe9monstration"),(0,r.kt)("p",null,"\xe0 venir !"),(0,r.kt)("h2",{id:"utiliser-ce-formulaire"},"Utiliser ce formulaire"),(0,r.kt)("h3",{id:"licence"},"Licence"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"(https://creativecommons.org/licenses/by/2.0/fr/)"},(0,r.kt)("img",{alt:"CC-BY",src:i(6587).Z,width:"261",height:"141"}))),(0,r.kt)("h3",{id:"xlsform"},"XLSform"),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:i(2714).Z},"xlsform")),(0,r.kt)("h3",{id:"donn\xe9es-externes-et-m\xe9dias-associ\xe9s"},"Donn\xe9es externes et m\xe9dias associ\xe9s"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{target:"_blank",href:i(3741).Z},"liste esp\xe8ces plantes")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{target:"_blank",href:i(1108).Z},"liste habitats CORINE")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{target:"_blank",href:i(9333).Z},"centrides de polygon pour select_one sur carte"))),(0,r.kt)("h2",{id:"fonctionnalit\xe9s-de-xlsform-mises-en-oeuvre"},"Fonctionnalit\xe9s de XLSForm mises en oeuvre"),(0,r.kt)("p",null,"\xe0 compl\xe9ter"),(0,r.kt)("h3",{id:"discussion-en-ligne-sur-le-forum-dodk"},"Discussion en ligne sur le forum d'ODK"),(0,r.kt)("p",null,"non concern\xe9"),(0,r.kt)("h2",{id:"traitement-des-donn\xe9es"},"Traitement des donn\xe9es"),(0,r.kt)("h3",{id:"scripts-sql"},"Scripts SQL"),(0,r.kt)("h4",{id:"calcul-des-\xe9tats-de-conservation-"},"Calcul des \xe9tats de conservation :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-- View: odk_central.evaluation_ec_habitats\n\nDROP MATERIALIZED VIEW IF EXISTS odk_central.evaluation_ec_habitats;\n\nCREATE MATERIALIZED VIEW IF NOT EXISTS odk_central.evaluation_ec_habitats\nTABLESPACE pg_default\nAS\n\nWITH data AS (\n         SELECT form_etats_conservation_hbt_n2k_structure_data.data_id,\n            form_etats_conservation_hbt_n2k_structure_data.indic_strc AS indicateur,\n            form_etats_conservation_hbt_n2k_structure_data.saisie_valeur_indi_strc AS valeur,\n            NULL::text AS presence_absence,\n            form_etats_conservation_hbt_n2k_structure_data.\"__Submissions-saisie_indics_hbts-id\"\n           FROM odk_central.form_etats_conservation_hbt_n2k_structure_data\n        UNION\n         SELECT form_etats_conservation_hbt_n2k_composition_data.data_id,\n            form_etats_conservation_hbt_n2k_composition_data.indic_compo,\n            form_etats_conservation_hbt_n2k_composition_data.saisie_valeur_indic_compo,\n            NULL::text AS presence_absence,\n            form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n           FROM odk_central.form_etats_conservation_hbt_n2k_composition_data\n        UNION\n         SELECT form_etats_conservation_hbt_n2k_degradation_data.data_id,\n            form_etats_conservation_hbt_n2k_degradation_data.indic_degradation,\n            form_etats_conservation_hbt_n2k_degradation_data.saisie_valeur_indic_degradation,\n            form_etats_conservation_hbt_n2k_degradation_data.presence_absence_indicateur,\n            form_etats_conservation_hbt_n2k_degradation_data.\"__Submissions-saisie_indics_hbts-id\"\n           FROM odk_central.form_etats_conservation_hbt_n2k_degradation_data\n        ), note AS (\n         SELECT data.\"__Submissions-saisie_indics_hbts-id\",\n            data.data_id,\n            split_part(referentiel_valeurs_seuil_indics_ec.list_name::text, '_'::text, 4) AS critere,\n            data.indicateur,\n            referentiel_valeurs_seuil_indics_ec.rang,\n            COALESCE(data.valeur, data.presence_absence) AS valeur,\n            referentiel_valeurs_seuil_indics_ec.critere_bon,\n            referentiel_valeurs_seuil_indics_ec.critere_moyen,\n            referentiel_valeurs_seuil_indics_ec.critere_defavorable,\n                CASE\n                    WHEN (referentiel_valeurs_seuil_indics_ec.critere_bon::text = 'Pr\xe9sence'::text AND data.presence_absence = '1'::text OR referentiel_valeurs_seuil_indics_ec.critere_bon::text = 'Absence'::text AND data.presence_absence = '0'::text) AND referentiel_valeurs_seuil_indics_ec.critere_moyen::text = '-'::text THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_bon::text ~~* '>=%'::text AND NULLIF(data.valeur, ''::text)::numeric >= replace(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '>='::text, ''::text)::numeric THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_bon::text ~~* '<=%'::text AND NULLIF(data.valeur, ''::text)::numeric <= replace(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '<='::text, ''::text)::numeric THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_bon::text ~~* '>%'::text AND referentiel_valeurs_seuil_indics_ec.critere_bon::text !~~* '>=%'::text AND NULLIF(data.valeur, ''::text)::numeric > replace(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '>'::text, ''::text)::numeric THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_bon::text ~~* '<%'::text AND referentiel_valeurs_seuil_indics_ec.critere_bon::text !~~* '<=%'::text AND NULLIF(data.valeur, ''::text)::numeric < replace(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '<'::text, ''::text)::numeric THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_bon::text ~~* '=%'::text AND NULLIF(data.valeur, ''::text)::numeric = replace(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '='::text, ''::text)::numeric THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_bon::text ~~* '%-%'::text AND ((NULLIF(data.valeur, ''::text)::numeric >= split_part(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '-'::text, 1)::numeric AND NULLIF(data.valeur, ''::text)::numeric <= split_part(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '-'::text, 2)::numeric) OR (NULLIF(data.valeur, ''::text)::numeric >= split_part(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '-'::text, 2)::numeric AND NULLIF(data.valeur, ''::text)::numeric <= split_part(referentiel_valeurs_seuil_indics_ec.critere_bon::text, '-'::text, 1)::numeric)) THEN 'bon'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text = 'Pr\xe9sence'::text AND data.presence_absence = '1'::text OR referentiel_valeurs_seuil_indics_ec.critere_moyen::text = 'Absence'::text AND data.presence_absence = '0'::text THEN 'moyen'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text ~~* '>=%'::text AND NULLIF(data.valeur, ''::text)::numeric >= replace(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '>='::text, ''::text)::numeric THEN 'moyen'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text ~~* '<=%'::text AND NULLIF(data.valeur, ''::text)::numeric <= replace(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '<='::text, ''::text)::numeric THEN 'moyen'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text ~~* '>%'::text AND referentiel_valeurs_seuil_indics_ec.critere_moyen::text !~~* '>=%'::text AND NULLIF(data.valeur, ''::text)::numeric > replace(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '>'::text, ''::text)::numeric THEN 'moyen'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text ~~* '<%'::text AND referentiel_valeurs_seuil_indics_ec.critere_moyen::text !~~* '<=%'::text AND NULLIF(data.valeur, ''::text)::numeric < replace(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '<'::text, ''::text)::numeric THEN 'moyen'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text ~~* '=%'::text AND NULLIF(data.valeur, ''::text)::numeric = replace(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '='::text, ''::text)::numeric THEN 'moyen'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_moyen::text ~~* '%-%'::text AND referentiel_valeurs_seuil_indics_ec.critere_moyen::text <> '-'::text AND ((NULLIF(data.valeur, ''::text)::numeric >= split_part(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '-'::text, 1)::numeric AND NULLIF(data.valeur, ''::text)::numeric <= split_part(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '-'::text, 2)::numeric) OR (NULLIF(data.valeur, ''::text)::numeric >= split_part(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '-'::text, 2)::numeric AND NULLIF(data.valeur, ''::text)::numeric <= split_part(referentiel_valeurs_seuil_indics_ec.critere_moyen::text, '-'::text, 1)::numeric)) THEN 'moyen'::text\n                    WHEN (referentiel_valeurs_seuil_indics_ec.critere_defavorable::text = 'Pr\xe9sence'::text AND data.presence_absence = '1'::text OR referentiel_valeurs_seuil_indics_ec.critere_defavorable::text = 'Absence'::text AND data.presence_absence = '0'::text) AND referentiel_valeurs_seuil_indics_ec.critere_moyen::text = '-'::text THEN 'defavorable'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_defavorable::text ~~* '<=%'::text AND NULLIF(data.valeur, ''::text)::numeric <= replace(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '<='::text, ''::text)::numeric THEN 'defavorable'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_defavorable::text ~~* '>=%'::text AND NULLIF(data.valeur, ''::text)::numeric >= replace(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '>='::text, ''::text)::numeric THEN 'defavorable'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_defavorable::text ~~* '>%'::text AND referentiel_valeurs_seuil_indics_ec.critere_defavorable::text !~~* '>=%'::text AND NULLIF(data.valeur, ''::text)::numeric > replace(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '>'::text, ''::text)::numeric THEN 'defavorable'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_defavorable::text ~~* '<%'::text AND referentiel_valeurs_seuil_indics_ec.critere_defavorable::text !~~* '<=%'::text AND NULLIF(data.valeur, ''::text)::numeric < replace(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '<'::text, ''::text)::numeric THEN 'defavorable'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_defavorable::text ~~* '=%'::text AND NULLIF(data.valeur, ''::text)::numeric = replace(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '='::text, ''::text)::numeric THEN 'defavorable'::text\n                    WHEN referentiel_valeurs_seuil_indics_ec.critere_defavorable::text ~~* '%-%'::text AND ((NULLIF(data.valeur, ''::text)::numeric >= split_part(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '-'::text, 1)::numeric AND NULLIF(data.valeur, ''::text)::numeric <= split_part(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '-'::text, 2)::numeric) OR (NULLIF(data.valeur, ''::text)::numeric >= split_part(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '-'::text, 2)::numeric AND NULLIF(data.valeur, ''::text)::numeric <= split_part(referentiel_valeurs_seuil_indics_ec.critere_defavorable::text, '-'::text, 1)::numeric)) THEN 'defavorable'::text\n                    ELSE NULL::text\n                END AS note\n           FROM data\n             JOIN outils.referentiel_valeurs_seuil_indics_ec ON referentiel_valeurs_seuil_indics_ec.name::text = data.indicateur\n         \n      ), liste_sp_ruderales AS (\n         SELECT string_agg(COALESCE(split_part(form_etats_conservation_hbt_n2k_liste_plantes_ruderales_data.lb_nom_espece_ruderale, '!'::text, 1), form_etats_conservation_hbt_n2k_liste_plantes_ruderales_data.recherche_espece_ruderale), ','::text) AS liste_sp_ruderales,\n            string_agg(form_etats_conservation_hbt_n2k_liste_plantes_ruderales_data.cd_nom_espece_ruderale, ','::text) AS liste_cd_nom_sp_rud,\n            form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n           FROM odk_central.form_etats_conservation_hbt_n2k_liste_plantes_ruderales_data\n             JOIN odk_central.form_etats_conservation_hbt_n2k_composition_data ON form_etats_conservation_hbt_n2k_composition_data.data_id = form_etats_conservation_hbt_n2k_liste_plantes_ruderales_data.\"__Submissions-saisie_indics_hbts-composition-id\"\n             JOIN odk_central.form_etats_conservation_hbt_n2k_saisie_indics_hbts_data ON form_etats_conservation_hbt_n2k_saisie_indics_hbts_data.data_id = form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n          GROUP BY form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n        ), liste_sp_exotiques AS (\n         SELECT string_agg(COALESCE(split_part(form_etats_conservation_hbt_n2k_liste_plantes_exotiques_data.lb_nom_espece_exotique, '!'::text, 1), form_etats_conservation_hbt_n2k_liste_plantes_exotiques_data.recherche_espece_exotique), ','::text) AS liste_sp_exotiques,\n            string_agg(form_etats_conservation_hbt_n2k_liste_plantes_exotiques_data.cd_nom_espece_exotique, ','::text) AS liste_cd_nom_sp_exo,\n            form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n           FROM odk_central.form_etats_conservation_hbt_n2k_liste_plantes_exotiques_data\n             JOIN odk_central.form_etats_conservation_hbt_n2k_composition_data ON form_etats_conservation_hbt_n2k_composition_data.data_id = form_etats_conservation_hbt_n2k_liste_plantes_exotiques_data.\"__Submissions-saisie_indics_hbts-composition-id\"\n             JOIN odk_central.form_etats_conservation_hbt_n2k_saisie_indics_hbts_data ON form_etats_conservation_hbt_n2k_saisie_indics_hbts_data.data_id = form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n          GROUP BY form_etats_conservation_hbt_n2k_composition_data.\"__Submissions-saisie_indics_hbts-id\"\n        )\n SELECT submissions.projet_site,\n    saisie_indic.habitat_n2k,\n    saisie_indic.id_polygone,\n    note.\"__Submissions-saisie_indics_hbts-id\",\n    saisie_indic.polygones_habitats AS id_polygone_carte,\n    COALESCE(submissions.email_utilisateur, submissions.mail_observateur) AS mail_observateur,\n    COALESCE(submissions.nom_observateur, submissions.username) AS observateur,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'strc'::text AND note.note = 'bon'::text) AS strc_bon,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'strc'::text AND note.note = 'moyen'::text) AS strc_moyen,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'strc'::text AND note.note = 'defavorable'::text) AS strc_defavorable,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'compo'::text AND note.note = 'bon'::text) AS compo_bon,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'compo'::text AND note.note = 'moyen'::text) AS compo_moyen,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'compo'::text AND note.note = 'defavorable'::text) AS compo_defavorable,\n    liste_sp_ruderales.liste_sp_ruderales,\n    liste_sp_exotiques.liste_sp_exotiques,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'degradation'::text AND note.note = 'bon'::text) AS degradation_bon,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'degradation'::text AND note.note = 'moyen'::text) AS degradation_moyen,\n    string_agg(concat(note.indicateur, ' -> ', note.valeur), ' ; '::text) FILTER (WHERE note.critere = 'degradation'::text AND note.note = 'defavorable'::text) AS degradation_defavorable,\n        CASE max(length(note.note)) FILTER (WHERE note.critere = 'strc'::text)\n            WHEN 3 THEN 'bon'::text\n            WHEN 5 THEN 'moyen'::text\n            WHEN 11 THEN 'defavorable'::text\n            ELSE 'NE'::text\n        END AS note_structure,\n        CASE max(length(note.note)) FILTER (WHERE note.critere = 'compo'::text)\n            WHEN 3 THEN 'bon'::text\n            WHEN 5 THEN 'moyen'::text\n            WHEN 11 THEN 'defavorable'::text\n            ELSE 'NE'::text\n        END AS note_composition,\n        CASE max(length(note.note)) FILTER (WHERE note.critere = 'degradation'::text)\n            WHEN 3 THEN 'bon'::text\n            WHEN 5 THEN 'moyen'::text\n            WHEN 11 THEN 'defavorable'::text\n            ELSE 'NE'::text\n        END AS note_degradation,\n        CASE max(length(note.note))\n            WHEN 3 THEN 'bon'::text\n            WHEN 5 THEN 'moyen'::text\n            WHEN 11 THEN 'defavorable'::text\n            ELSE 'NE'::text\n        END AS note_ec,\n    saisie_indic.precision_ec,\n    saisie_indic.recouvrement_total,\n    st_transform(COALESCE(st_setsrid(st_makepoint(split_part(saisie_indic.geometrie, ' '::text, 2)::numeric::double precision, split_part(saisie_indic.geometrie, ' '::text, 1)::numeric::double precision), 4326), st_force2d(st_setsrid(st_geomfromgeojson(replace(saisie_indic.point_auto, '\\'::text, ''::text)::json), 4326))::geometry(Point,4326)), 2154)::geometry(Point,2154) AS geom\n   FROM note\n     JOIN odk_central.form_etats_conservation_hbt_n2k_saisie_indics_hbts_data saisie_indic ON note.\"__Submissions-saisie_indics_hbts-id\" = saisie_indic.data_id\n     JOIN odk_central.form_etats_conservation_hbt_n2k_submissions_data submissions ON saisie_indic.\"__Submissions-id\" = submissions.data_id\n     LEFT JOIN liste_sp_ruderales ON liste_sp_ruderales.\"__Submissions-saisie_indics_hbts-id\" = saisie_indic.data_id\n     LEFT JOIN liste_sp_exotiques ON liste_sp_exotiques.\"__Submissions-saisie_indics_hbts-id\" = saisie_indic.data_id\n  GROUP BY submissions.projet_site, saisie_indic.id_polygone, saisie_indic.polygones_habitats, saisie_indic.habitat_n2k, liste_sp_ruderales.liste_sp_ruderales, liste_sp_exotiques.liste_sp_exotiques, note.\"__Submissions-saisie_indics_hbts-id\", saisie_indic.precision_ec, saisie_indic.recouvrement_total, saisie_indic.geometrie, saisie_indic.point_auto, (COALESCE(submissions.email_utilisateur, submissions.mail_observateur)), (COALESCE(submissions.nom_observateur, submissions.username))\nWITH DATA;\n\nALTER TABLE IF EXISTS odk_central.evaluation_ec_habitats\n    OWNER TO dba;\n\nGRANT ALL ON TABLE odk_central.evaluation_ec_habitats TO dba;\nGRANT SELECT ON TABLE odk_central.evaluation_ec_habitats TO equipe_cen_occ;\n\nCREATE INDEX geom_idx\n    ON odk_central.evaluation_ec_habitats USING gist\n    (geom)\n    TABLESPACE pg_default;\nCREATE INDEX unique_id_patch\n    ON odk_central.evaluation_ec_habitats USING btree\n    (\"__Submissions-saisie_indics_hbts-id\" COLLATE pg_catalog.\"default\")\n    TABLESPACE pg_default;\n    ```\n")))}d.isMDXComponent=!0},9333:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/files/centroides_polygones_habitats-42b5ed80daf014461eba7da73b86a9fe.csv"},3741:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/files/especes_plantes-0d2a2d2f4e3ab323a9b486af1b2d8b57.csv"},2714:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/files/etats_conservation_hbt_n2k_v2023-3f37b0bf73aa478f6d4347116ee9b7af.xlsx"},1108:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/files/taxref_sicen_habitat-4bb25b774370fd0602413cbeddfe3a1a.csv"},6587:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/by-f7368ced3a9a3c16b37e3f7cbce47850.png"}}]);